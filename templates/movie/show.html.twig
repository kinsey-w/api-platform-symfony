{% extends 'base.html.twig' %}

{% block title %}{{ movie.title }}{% endblock %}

{% block body %}
    <nav class="breadcrumbs">
        <a href="{{ path('movies_list') }}">‚Üê Back to movies</a>
    </nav>

    <section class="movie-detail">
        <div class="movie-detail__poster">
            {% if movie.poster %}
                <img src="/uploads/{{ movie.poster.filePath }}" alt="{{ movie.title }}">
            {% else %}
                <img src="https://placehold.co/400x600?text=No+Image" alt="No poster">
            {% endif %}
        </div>

        <div class="movie-detail__content">
            <h1 class="movie-detail__title">{{ movie.title }}</h1>

            <div class="movie-detail__meta">
                {% if movie.releaseDate %}
                    <span>{{ movie.releaseDate|date('Y') }}</span>
                {% endif %}
                {% if movie.duration %}
                    <span>{{ movie.duration }} min</span>
                {% endif %}
                {% if movie.rating %}
                    <span>‚òÖ {{ movie.rating|number_format(1) }}</span>
                {% endif %}
                {% if movie.category %}
                    <span class="badge badge--category">{{ movie.category.name }}</span>
                {% endif %}
            </div>

            {% if movie.synopsis %}
                <h2 class="movie-detail__section-title">Synopsis</h2>
                <p class="movie-detail__synopsis">{{ movie.synopsis }}</p>
            {% endif %}

            <div class="movie-detail__actions">
                <a href="{{ path('movies_list') }}" class="btn">Back to list</a>
            </div>

            {% if app.user %}
                <a href="{{ path('toggle_favorite_front', { movieId: movie.id }) }}" class="btn">
                    {% if movie in app.user.favorites %}
                        ‚ù§Ô∏è Remove from favorites
                    {% else %}
                        ü§ç Add to favorites
                    {% endif %}
                </a>
            {% endif %}

        </div>
    </section>
{% endblock %}
